# Мотивация
В данный момент мы имеем проблемы с долгим выполнением заказов и потерей заказов.

При этом у нас нет инструмента, который позволил бы детально проанализировать проблему.

Таким инструментом является подсистема логирования.

Данная подсистема позволит нам накопить достаточное количество информации чтобы локализовать причины проблем в той или иной подсистеме.

# Предлагаемое решение

Решение по логированию будет состоять из нескольких уровней:
1) Сбор логов ОС и процессов с серверов
2) Сбор логов о бизнес событиях (создана новая заявка, изменение статусов и тп)

## Ключевые требования к бизнес событиям:
1. Каждая запись лога о бизнес событии должна содержать уникальный в рамках всей системы идентификатор бизнес объекта (номер заказа, id клиента и т.п.)
2. Каждое юизнес событие должно иметь уникальный код
3. Каждое бизнес событие должно иметь флаг - является оно ошибкой или нет

## Технический стек
Для реализации подсистемы логирование будет использоваться классический стек ELK:
- ElasticSearch (хранение)
- Logstash (сбор)
- Kibana (отображение)

## Ключевые требования к реализации
1. Системные и бизнес логи хранятся отдельно
2. Логи от каждой подсистемы / сервера должны храниться в разных индексах
3. Должен быть настроен UI для поиска по ключевым полям каждого индекса
4. Должна быть настроена ротация логов: логи старше месяца должны переезжать в архивное хранилище, где они будут храниться в течении года и стираться

## Ключевые требования к реализации в части безопасности

1. Должна быть реализована авторизация и аутентификация при входе в UI логирования
2. API ElasticSearch должен быть закрыт от всех кроме технической учетной записи Kibana
2. Маскирование конфиденциальной информации (ФИО, телефоны клиентов, паролей, сумм и тп). Открытое использоватние только технических ID и нечуствительных бизнес данных 
3. Ведение журнала аудита действий пользователя в UI логирования